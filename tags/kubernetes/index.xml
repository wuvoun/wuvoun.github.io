<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kubernetes on Wuvoun</title>
    <link>https://wuvoun.github.io/tags/kubernetes/</link>
    <description>Recent content from Wuvoun</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    
    <managingEditor>253567768@qq.com (Wuvoun)</managingEditor>
    <webMaster>253567768@qq.com (Wuvoun)</webMaster>
    
    <copyright>All articles on this blog are licensed under the BY-NC-SA license agreement unless otherwise stated. Please indicate the source when reprinting!</copyright>
    
    <lastBuildDate>Fri, 12 Sep 2025 22:03:04 +0800</lastBuildDate>
    
    
    <atom:link href="https://wuvoun.github.io/tags/kubernetes/index.xml" rel="self" type="application/rss&#43;xml" />
    

    
    

    <item>
      <title>HTB-Kuber</title>
      <link>https://wuvoun.github.io/post/htb-kuber/</link>
      <pubDate>Fri, 12 Sep 2025 22:03:04 &#43;0800</pubDate>
      <author>253567768@qq.com (Wuvoun)</author>
      <guid>https://wuvoun.github.io/post/htb-kuber/</guid>
      <description>
        <![CDATA[<h1>HTB-Kuber</h1><p>Author: Wuvoun(253567768@qq.com)</p>
        
          <h1 id="htb-kuber">
<a class="header-anchor" href="#htb-kuber"></a>
HTB-Kuber
</h1><h2 id="前置知识">
<a class="header-anchor" href="#%e5%89%8d%e7%bd%ae%e7%9f%a5%e8%af%86"></a>
前置知识
</h2><h3 id="kubernetes-是什么">
<a class="header-anchor" href="#kubernetes-%e6%98%af%e4%bb%80%e4%b9%88"></a>
Kubernetes 是什么？
</h3><p>Kubernetes（K8s）是一个 <strong>容器编排系统</strong>，用来管理 Docker 容器，它负责应用怎么启动、扩容、自动恢复、网络通信等。</p>
<h3 id="什么是-kube-system-命名空间的转储">
<a class="header-anchor" href="#%e4%bb%80%e4%b9%88%e6%98%af-kube-system-%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4%e7%9a%84%e8%bd%ac%e5%82%a8"></a>
什么是 <strong>“kube-system 命名空间的转储”</strong>？
</h3><p>在 Kubernetes 里，所有的东西（应用、配置、日志、服务）都会被分门别类，放在一个个“文件夹”里，这个“文件夹”叫 <strong>命名空间（namespace）</strong>。</p>
<p>其中有一个很重要的系统级文件夹，叫 <strong>kube-system</strong>，它里面存放的是 <strong>Kubernetes 自己运行所需要的核心组件</strong>，比如：</p>
<ul>
<li>kube-dns（负责集群里的域名解析）</li>
<li>kube-proxy（负责流量转发）</li>
<li>coredns、kube-apiserver、etcd（管理整个集群的数据）</li>
</ul>
<h3 id="什么是-pod">
<a class="header-anchor" href="#%e4%bb%80%e4%b9%88%e6%98%af-pod"></a>
什么是 Pod？
</h3><ul>
<li>在 <strong>Kubernetes</strong> 里，<strong>Pod 是最小的运行单元</strong>。</li>
<li>一个 Pod 里面可以包含一个或多个 <strong>容器（container）</strong>，这些容器共享同一个网络和存储环境。</li>
</ul>
<h3 id="文件内容分析">
<a class="header-anchor" href="#%e6%96%87%e4%bb%b6%e5%86%85%e5%ae%b9%e5%88%86%e6%9e%90"></a>
文件内容分析
</h3><ol>
<li><strong>00-namespace.yaml</strong>
<ul>
<li>定义了 <code>kube-system</code> 这个命名空间本身。</li>
<li>就像是一个“文件夹的标签”，说明“这里存放的是系统级别的东西”。</li>
</ul>
</li>
<li><strong>configmaps.yaml</strong>
<ul>
<li>保存了系统组件的配置信息（比如 DNS 配置、代理规则）。</li>
<li>攻击者如果能改这个，就可能劫持 DNS，把流量导向恶意服务器。</li>
</ul>
</li>
<li><strong>daemonset.yaml</strong>
<ul>
<li>DaemonSet 会在每个节点上跑一个 Pod。</li>
<li>常用于部署日志收集、网络代理等系统级别的服务。</li>
<li>如果这里被篡改，攻击者就能在集群所有节点“同时种马”。</li>
</ul>
</li>
<li><strong>deployment.yaml</strong>
<ul>
<li>定义了集群里需要长期运行的一些服务（比如 <code>coredns</code>、<code>metrics-server</code>）。</li>
<li>如果有人改了 Deployment，可能会植入恶意镜像。</li>
</ul>
</li>
<li><strong>job.yaml</strong>
<ul>
<li>定义了临时运行的批处理任务（Job）。</li>
<li>如果你看到奇怪的 Job（比如下载脚本、curl 外部地址），那可能是入侵的迹象。</li>
</ul>
</li>
<li><strong>pods.yaml</strong>
<ul>
<li>列出了当前运行的所有 Pod。</li>
<li>这里是重点！你能看到哪些镜像在跑、镜像从哪拉的（dockerhub、私库还是可疑仓库）。</li>
<li>恶意 Pod 往往会有异常镜像名，比如 <code>ubuntu:latest</code>，但里面偷偷跑挖矿程序。</li>
</ul>
</li>
<li><strong>secrets.yaml</strong>
<ul>
<li>存放了集群里的各种敏感信息（API Token、TLS 证书、密码）。</li>
<li>如果这些被泄露，黑客完全可以伪装成合法用户操控集群。</li>
<li>这是最需要重点检查的文件。</li>
</ul>
</li>
<li><strong>service.yaml</strong>
<ul>
<li>定义了服务如何暴露（ClusterIP、NodePort、LoadBalancer）。</li>
<li>如果有 <code>NodePort</code> 暴露在公网，就是潜在攻击入口。</li>
</ul>
</li>
<li><strong>serviceaccount.yaml</strong>
<ul>
<li>定义了 Pod 与集群 API 交互用的身份。</li>
<li>如果某些 ServiceAccount 权限过大（比如 cluster-admin），攻击者拿到就能控制整个集群。</li>
</ul>
</li>
</ol>
<h3 id="端口映射关系">
<a class="header-anchor" href="#%e7%ab%af%e5%8f%a3%e6%98%a0%e5%b0%84%e5%85%b3%e7%b3%bb"></a>
端口映射关系
</h3><p><img src="https://github.com/wuvoun/picx-images-hosting/raw/master/image.8z6vp597xv.webp" alt="image.png"></p>
        
        <hr><p>Published on 2025-09-12 at <a href='https://wuvoun.github.io/'>Wuvoun</a>, last modified on 2025-09-12</p>]]>
      </description>
      
        <category>HTB</category>
      
    </item>
    
  </channel>
</rss>
